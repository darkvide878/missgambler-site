<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MissGambler</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="icon" href="assets/favicon.ico">
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <style>
    body{margin:0;font-family:system-ui;background:#070a14;color:#eef2ff}
    header{padding:16px;display:flex;justify-content:space-between;align-items:center;background:#0b1025}
    button{padding:8px 14px;border-radius:10px;border:none;font-weight:700;cursor:pointer}
    #btnSignup{background:#6366f1;color:white}
    #btnLogin{background:#22c55e;color:#06210f}
    #btnLogout{background:#ef4444;color:white}
  </style>
</head>
<body>

<header>
  <h1>MissGambler</h1>
  <div>
    <button id="btnSignup" onclick="signup()">Sign up</button>
    <button id="btnLogin" onclick="login()">Login</button>
    <button id="btnLogout" onclick="logout()" style="display:none">Logout</button>
  </div>
</header>

<main style="padding:24px">
  <h2>Welcome to MissGambler</h2>
  <p>Casino reviews & bonuses. 18+ only.</p>
</main>

<!-- COOKIE BANNER -->
<div id="cookieBanner" style="position:fixed;bottom:0;left:0;right:0;background:#0b1025;color:#eef2ff;padding:14px;display:none;z-index:9999">
  We use cookies for authentication.
  <button onclick="acceptCookies()">Accept</button>
</div>

<script>
const COOKIE_KEY = "missgambler_cookie_consent";
function acceptCookies(){
  localStorage.setItem(COOKIE_KEY,"yes");
  document.getElementById("cookieBanner").style.display="none";
}
if(!localStorage.getItem(COOKIE_KEY)){
  document.getElementById("cookieBanner").style.display="block";
}
</script>

<script>
const supabase = window.supabase.createClient(
  "https://evnodxrryguyaelnjtaa.supabase.co",
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV2bm9keHJyeWd1eWFlbG5qdGFhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYyMzE1MTYsImV4cCI6MjA4MTgwNzUxNn0.9VyDJ93iZAiF302f3PDBtKEtFNQ77IFxf33mjN20fYA"
);

async function signup(){
  const email = prompt("Email");
  const password = prompt("Password (min 6 chars)");
  const {error} = await supabase.auth.signUp({email,password});
  if(error) alert(error.message);
  else alert("Check your email to confirm signup");
}

async function login(){
  const email = prompt("Email");
  const password = prompt("Password");
  const {error} = await supabase.auth.signInWithPassword({email,password});
  if(error) alert(error.message);
  else updateUI();
}

async function logout(){
  await supabase.auth.signOut();
  updateUI();
}

async function updateUI(){
  const {data} = await supabase.auth.getUser();
  const logged = !!data.user;
  btnLogin.style.display = logged ? "none" : "inline";
  btnSignup.style.display = logged ? "none" : "inline";
  btnLogout.style.display = logged ? "inline" : "none";
}
updateUI();
</script>

</body>
</html>
