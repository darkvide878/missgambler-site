<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MissGambler — Top Online Casinos</title>
  <meta name="description" content="MissGambler compares top online casinos by country. 18+ Gamble responsibly." />

  <!-- Icons -->
  <link rel="icon" href="assets/favicon.png">
  <link rel="apple-touch-icon" href="assets/apple-touch-icon.png">

  <style>
    :root{
      --bg:#070a14;
      --panel:rgba(255,255,255,.03);
      --text:#eef2ff;
      --muted:#aab3da;
      --line:rgba(255,255,255,.10);
      --accent:#7c3aed;
      --accent2:#22c55e;
      --warn:#f59e0b;
      --shadow:0 12px 30px rgba(0,0,0,.35);
      --radius:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      color:var(--text);
      background:
        radial-gradient(1200px 900px at 15% -10%, rgba(124,58,237,.30), transparent 55%),
        radial-gradient(1000px 900px at 90% 0%, rgba(34,197,94,.20), transparent 55%),
        var(--bg);
      overflow-x:hidden;
    }
    a{color:inherit;text-decoration:none}
    .wrap{max-width:1180px;margin:0 auto;padding:22px}

    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      padding:12px 0;
    }
    .brand{
      display:flex;align-items:center;gap:12px;font-weight:900;font-size:18px;
    }
    .logo{
      width:40px;height:40px;border-radius:14px;overflow:hidden;
      background:linear-gradient(135deg,var(--accent),var(--accent2));
      box-shadow:var(--shadow);
      display:grid;place-items:center;
      flex:0 0 auto;
    }
    .logo img{width:40px;height:40px;object-fit:cover;display:block}
    nav{display:flex;align-items:center;gap:10px;flex-wrap:wrap;justify-content:flex-end}
    nav a{
      color:var(--muted);
      font-weight:700;
      font-size:14px;
      padding:8px 10px;
      border-radius:12px;
      border:1px solid transparent;
    }
    nav a:hover{color:#fff;border-color:var(--line);background:rgba(255,255,255,.03)}

    .pill{
      display:inline-flex;align-items:center;gap:8px;
      border:1px solid var(--line);
      border-radius:999px;
      padding:8px 10px;
      background:rgba(255,255,255,.03);
      color:var(--muted);
      font-size:13px;
      font-weight:700;
    }
    select{
      background:transparent;
      color:#fff;
      border:none;
      outline:none;
      font-weight:800;
      cursor:pointer;
    }
    option{color:#111}
    .hero{
      border:1px solid var(--line);
      border-radius:var(--radius);
      padding:22px;
      background:var(--panel);
      box-shadow:var(--shadow);
    }
    .heroTop{
      display:flex;gap:14px;align-items:flex-start;justify-content:space-between;flex-wrap:wrap;
    }
    .hero h1{margin:0 0 10px}
    .hero p{margin:0;color:var(--muted)}
    .trust{
      margin-top:16px;
      display:grid;
      grid-template-columns:repeat(4,minmax(0,1fr));
      gap:10px;
    }
    .trust .t{
      border:1px solid var(--line);
      background:rgba(255,255,255,.02);
      border-radius:16px;
      padding:10px 12px;
      display:flex;
      gap:10px;
      align-items:flex-start;
    }
    .dot{width:10px;height:10px;border-radius:999px;background:var(--accent2);margin-top:4px;flex:0 0 auto}
    .t b{display:block}
    .t span{display:block;color:var(--muted);font-size:12px;margin-top:3px}

    .cards{margin-top:18px;display:grid;gap:14px}
    .card{
      border:1px solid var(--line);
      border-radius:var(--radius);
      padding:16px;
      display:grid;
      grid-template-columns:72px 1fr auto;
      gap:16px;
      background:var(--panel);
      box-shadow:var(--shadow);
      align-items:center;
    }
    .casinoLogo{
      width:72px;height:72px;border-radius:20px;overflow:hidden;border:1px solid var(--line);background:#111;
      display:grid;place-items:center;
    }
    .casinoLogo img{width:72px;height:72px;object-fit:cover;display:block}
    .fallbackMark{
      font-weight:1000;
      letter-spacing:.5px;
      font-size:16px;
      color:#fff;
      opacity:.85;
    }
    .name{font-size:18px;font-weight:900}
    .badge{
      display:inline-block;margin-top:6px;padding:6px 10px;border-radius:999px;border:1px solid var(--line);
      color:var(--muted);font-size:12px
    }
    .bonus{margin-top:10px;font-weight:900}
    .sub{color:var(--muted);font-size:13px;margin-top:4px}
    .cta{display:flex;flex-direction:column;gap:10px;min-width:190px}
    .btn{
      border:none;cursor:pointer;border-radius:14px;padding:12px 12px;text-align:center;font-weight:900;
      transition:transform .05s ease;
      user-select:none;
    }
    .btn:active{transform:translateY(1px)}
    .play{
      background:linear-gradient(135deg,var(--accent2),#2dd4bf);
      color:#06210f;
    }
    .review{
      background:transparent;color:var(--muted);border:1px solid var(--line);
      padding:10px 12px;border-radius:14px;text-align:center;font-weight:900;font-size:13px;
    }
    .empty{
      margin-top:16px;
      border:1px dashed rgba(255,255,255,.20);
      border-radius:18px;
      padding:16px;
      color:var(--muted);
      background:rgba(0,0,0,.15);
    }

    /* Footer */
    footer{
      margin-top:22px;
      border-top:1px solid var(--line);
      padding:22px 0 10px;
    }
    .footerGrid{
      display:grid;
      grid-template-columns: 1.2fr 1fr 1fr;
      gap:18px;
      align-items:start;
    }
    .fTitle{font-weight:1000;margin:0 0 10px;font-size:14px;letter-spacing:.2px}
    .fText{color:var(--muted);font-size:13px;line-height:1.6;margin:0}
    .links{display:grid;gap:8px}
    .links a{color:var(--muted);font-weight:800;font-size:13px}
    .links a:hover{color:#fff;text-decoration:underline}
    .badges{
      display:flex;flex-wrap:wrap;gap:10px;margin-top:10px;
    }
    .badgeBox{
      display:inline-flex;align-items:center;gap:8px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.02);
      padding:8px 10px;border-radius:999px;
      color:var(--muted);font-size:12px;font-weight:900;
    }
    .circle18{
      width:22px;height:22px;border-radius:999px;border:2px solid rgba(255,255,255,.35);
      display:grid;place-items:center;color:#fff;font-size:11px;font-weight:1000;
    }
    .copy{
      margin-top:14px;
      color:rgba(255,255,255,.45);
      font-size:12px;
      display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap;
    }

    /* Cookie banner */
    .cookie{
      position:fixed;left:14px;right:14px;bottom:14px;
      border:1px solid var(--line);
      background:#0b1025;
      border-radius:18px;
      padding:14px;
      display:none;
      z-index:9999;
      box-shadow:var(--shadow);
    }
    .cookieRow{display:flex;gap:10px;align-items:center;justify-content:space-between;flex-wrap:wrap}
    .cookie p{margin:0;color:var(--muted);font-size:13px;line-height:1.5}
    .cookieActions{display:flex;gap:8px}
    .cookieActions button{
      border:none;cursor:pointer;border-radius:12px;padding:10px 12px;font-weight:1000;
    }
    .accept{background:#22c55e;color:#06210f}
    .reject{background:transparent;color:#fff;border:1px solid rgba(255,255,255,.25)}

    /* 18+ gate */
    .age{
      position:fixed;inset:0;background:rgba(0,0,0,.72);
      display:none;align-items:center;justify-content:center;z-index:9998;
    }
    .ageBox{
      width:min(520px, calc(100% - 28px));
      background:#0b1025;border:1px solid var(--line);
      border-radius:18px;padding:18px;text-align:center;
      box-shadow:var(--shadow);
    }
    .ageBox h2{margin:0 0 8px}
    .ageBox p{margin:0;color:var(--muted)}
    .ageBox .row{display:flex;gap:10px;justify-content:center;margin-top:14px;flex-wrap:wrap}
    .ageBox button{min-width:140px}
    .no{background:transparent;color:#fff;border:1px solid rgba(255,255,255,.25)}

    /* Chips rain fx */
    .chip{
      position:fixed;
      width:18px;height:18px;border-radius:999px;
      border:2px solid rgba(255,255,255,.55);
      background:radial-gradient(circle at 30% 30%, rgba(255,255,255,.8), rgba(255,255,255,.12));
      box-shadow:0 10px 18px rgba(0,0,0,.35);
      pointer-events:none;
      z-index:9997;
      transform:translate(-50%,-50%);
      will-change:transform, opacity;
    }
    .chip:after{
      content:"";
      position:absolute;inset:4px;
      border-radius:999px;
      border:2px dashed rgba(255,255,255,.35);
    }

    @media (max-width: 860px){
      .trust{grid-template-columns:repeat(2,minmax(0,1fr))}
      .card{grid-template-columns:72px 1fr}
      .cta{grid-column:1 / -1;flex-direction:row;min-width:auto}
      .footerGrid{grid-template-columns:1fr}
    }
  </style>
</head>
<body>

<!-- 18+ Gate -->
<div class="age" id="ageGate">
  <div class="ageBox">
    <h2>18+ Only</h2>
    <p>This website contains gambling-related content. Please confirm you are 18 or older.</p>
    <div class="row">
      <button class="btn play" onclick="acceptAge()">I am 18+</button>
      <button class="btn no" onclick="location.href='https://www.google.com'">Leave</button>
    </div>
  </div>
</div>

<div class="wrap">
  <header>
    <div class="brand">
      <div class="logo">
        <img src="assets/missgambler.png" alt="MissGambler logo" onerror="this.style.display='none'; this.parentElement.innerHTML='<span class=\'fallbackMark\'>MG</span>';">
      </div>
      <div>MissGambler</div>
    </div>

    <nav>
      <span class="pill">
        Country:
        <select id="countrySelect" aria-label="Select country">
          <option value="AUTO">Auto</option>
          <option value="IT">IT</option><option value="ES">ES</option><option value="DE">DE</option><option value="BE">BE</option>
          <option value="GR">GR</option><option value="HU">HU</option><option value="AU">AU</option><option value="CZ">CZ</option>
          <option value="SI">SI</option><option value="AT">AT</option><option value="SK">SK</option><option value="PT">PT</option>
          <option value="IE">IE</option><option value="CA">CA</option><option value="CH">CH</option><option value="PL">PL</option>
          <option value="DK">DK</option><option value="HR">HR</option><option value="NO">NO</option><option value="RO">RO</option>
          <option value="AL">AL</option><option value="FI">FI</option>
        </select>
      </span>

      <a href="#top">Top Casinos</a>
      <a href="responsible-gambling.html">Responsible</a>
      <a href="privacy.html">Privacy</a>
      <a href="disclosure.html">Disclosure</a>
    </nav>
  </header>

  <section class="hero" id="top">
    <div class="heroTop">
      <div>
        <h1>Top Online Casinos</h1>
        <p>We show brands available for your selected country. You can change country anytime.</p>
      </div>
      <div class="pill" id="geoPill" title="How we pick your country">Geo: <span id="geoLabel">AUTO</span></div>
    </div>

    <div class="trust">
      <div class="t"><div class="dot"></div><div><b>Country-based listings</b><span>Only show brands available in your geo.</span></div></div>
      <div class="t"><div class="dot"></div><div><b>Responsible gambling</b><span>18+ — play responsibly, set limits.</span></div></div>
      <div class="t"><div class="dot"></div><div><b>Weekly checks</b><span>We keep offers and reviews updated.</span></div></div>
      <div class="t"><div class="dot"></div><div><b>Affiliate disclosure</b><span>We may earn commissions — rankings stay independent.</span></div></div>
    </div>
  </section>

  <section class="cards" id="cards"></section>

  <div class="empty" id="empty" style="display:none">
    No brands available for <b id="emptyGeo">your country</b> right now.
    <div style="margin-top:8px">Try selecting another country from the top menu.</div>
  </div>

  <footer>
    <div class="footerGrid">
      <div>
        <div class="brand" style="margin-bottom:10px">
          <div class="logo" style="width:36px;height:36px;border-radius:12px">
            <img src="assets/missgambler.png" alt="MissGambler logo" onerror="this.style.display='none'; this.parentElement.innerHTML='<span class=\'fallbackMark\'>MG</span>';">
          </div>
          <div style="font-weight:1000">MissGambler</div>
        </div>
        <p class="fText">
          We compare casino brands by country and highlight promotions, reviews, and responsible gambling resources.
          18+ only.
        </p>
        <div class="badges">
          <span class="badgeBox"><span class="circle18">18+</span> Play responsibly</span>
          <span class="badgeBox">Geo filters</span>
          <span class="badgeBox">Transparent rankings</span>
        </div>
      </div>

      <div>
        <p class="fTitle">Compliance</p>
        <div class="links">
          <a href="responsible-gambling.html">Responsible Gambling</a>
          <a href="privacy.html">Privacy Policy</a>
          <a href="cookie-policy.html">Cookie Policy</a>
          <a href="disclosure.html">Affiliate Disclosure</a>
        </div>
        <div style="margin-top:10px" class="fText">
          Contact / collaborations: <b>@DavideCorleone</b> (Telegram)
        </div>
      </div>

      <div>
        <p class="fTitle">Explore</p>
        <div class="links">
          <a href="#top">Top Casinos</a>
          <a href="reviews/needforslots.html">Casino Reviews</a>
          <a href="disclosure.html">Bonuses & Terms</a>
          <a href="sitemap.html">Sitemap</a>
        </div>
      </div>
    </div>

    <div class="copy">
      <div>© <span id="year"></span> MissGambler. All rights reserved.</div>
      <div><a href="#" id="cookiePrefs" style="color:rgba(255,255,255,.55);text-decoration:underline">Cookie preferences</a></div>
    </div>
  </footer>
</div>

<!-- Cookie banner -->
<div class="cookie" id="cookieBanner">
  <div class="cookieRow">
    <p>
      We use essential cookies for site functionality. If you allow it, we can also auto-detect your country to show the right brands.
      <a href="cookie-policy.html" style="color:#a5b4fc;text-decoration:underline">Learn more</a>
    </p>
    <div class="cookieActions">
      <button class="accept" onclick="setCookieConsent('accept')">Allow</button>
      <button class="reject" onclick="setCookieConsent('reject')">Reject</button>
    </div>
  </div>
</div>

<script>
  // ======= Basic constants =======
  const AGE_KEY = "missgambler_age_ok_v1";
  const CONSENT_KEY = "missgambler_cookie_consent_v1";
  const GEO_KEY = "missgambler_country_v1"; // user selection
  const GEO_SRC_KEY = "missgambler_country_src_v1";

  document.getElementById("year").textContent = new Date().getFullYear();

  // ======= 18+ gate =======
  function acceptAge(){
    localStorage.setItem(AGE_KEY,"1");
    document.getElementById("ageGate").style.display="none";
  }
  if(localStorage.getItem(AGE_KEY)!=="1"){
    document.getElementById("ageGate").style.display="flex";
  }

  // ======= Cookie consent =======
  function setCookieConsent(val){
    localStorage.setItem(CONSENT_KEY, val);
    document.getElementById("cookieBanner").style.display="none";
    // If user allowed, attempt auto-detect if AUTO selected
    if(val==="accept"){
      maybeAutoDetectCountry();
    }
  }
  const consent = localStorage.getItem(CONSENT_KEY);
  if(!consent){
    document.getElementById("cookieBanner").style.display="block";
  }
  document.getElementById("cookiePrefs").addEventListener("click", (e)=>{
    e.preventDefault();
    document.getElementById("cookieBanner").style.display="block";
  });

  // ======= Geo selection =======
  const countrySelect = document.getElementById("countrySelect");
  const geoLabel = document.getElementById("geoLabel");

  function setGeo(country, source){
    localStorage.setItem(GEO_KEY, country);
    localStorage.setItem(GEO_SRC_KEY, source);
    geoLabel.textContent = country;
    render();
  }

  // Init selection from storage
  const savedGeo = localStorage.getItem(GEO_KEY) || "AUTO";
  countrySelect.value = savedGeo;

  const src = localStorage.getItem(GEO_SRC_KEY) || "manual";
  geoLabel.textContent = savedGeo;

  countrySelect.addEventListener("change", ()=>{
    const v = countrySelect.value;
    if(v === "AUTO"){
      setGeo("AUTO", "manual");
      maybeAutoDetectCountry();
    }else{
      setGeo(v, "manual");
    }
  });

  async function maybeAutoDetectCountry(){
    // Only if user allowed cookies (because it uses IP lookup)
    const consentNow = localStorage.getItem(CONSENT_KEY);
    if(consentNow !== "accept") return;

    // Only if selection is AUTO
    if((localStorage.getItem(GEO_KEY)||"AUTO") !== "AUTO") return;

    try{
      // Simple free endpoint. If it fails, user can pick manually.
      const r = await fetch("https://ipapi.co/json/");
      if(!r.ok) throw new Error("geo lookup failed");
      const j = await r.json();
      const cc = (j && j.country_code) ? String(j.country_code).toUpperCase() : null;
      if(cc && cc.length === 2){
        // If our dropdown doesn't have it, still store it (filters will work if brands include it)
        geoLabel.textContent = cc;
        localStorage.setItem(GEO_KEY, cc);
        localStorage.setItem(GEO_SRC_KEY, "auto");
        // Set dropdown if present
        const opt = Array.from(countrySelect.options).find(o=>o.value===cc);
        if(opt) countrySelect.value = cc;
        render();
      }
    }catch(e){
      // silent
    }
  }

  // If AUTO and consent already accepted, detect
  if(savedGeo === "AUTO" && consent === "accept"){
    maybeAutoDetectCountry();
  }

  // ======= Data + rendering =======
  let DATA = null;

  async function loadData(){
    const r = await fetch("data.json", {cache:"no-store"});
    DATA = await r.json();
  }

  function currentGeo(){
    return localStorage.getItem(GEO_KEY) || "AUTO";
  }

  function allowedForGeo(brand, geo){
    if(!brand.allowed_geos || brand.allowed_geos.length === 0) return true;
    if(geo === "AUTO") return true; // while AUTO unresolved, show everything
    return brand.allowed_geos.includes(geo);
  }

  function casinoCard(brand){
    const safeName = brand.name || "Brand";
    const logo = brand.logo || "";
    const review = brand.review || "#";
    const website = brand.website || "#";
    const badge = brand.badge || "Top pick";
    const bonus = brand.bonus || "";
    const desc = brand.description || "";

    return `
      <article class="card">
        <div class="casinoLogo">
          <img src="${logo}" alt="${safeName} logo"
               onerror="this.remove(); this.parentElement.innerHTML='<div class=\'fallbackMark\'>${safeName.slice(0,2).toUpperCase()}</div>';">
        </div>

        <div>
          <div class="name">${safeName}</div>
          <span class="badge">${badge}</span>
          <div class="bonus">${bonus}</div>
          <div class="sub">${desc}</div>
        </div>

        <div class="cta">
          <a class="btn play js-chip" href="${website}" target="_blank" rel="noopener">Play Now</a>
          <a class="review js-chip" href="${review}">Read Review</a>
        </div>
      </article>
    `;
  }

  async function render(){
    if(!DATA) await loadData();

    const geo = currentGeo();
    const cardsEl = document.getElementById("cards");
    const emptyEl = document.getElementById("empty");
    const emptyGeo = document.getElementById("emptyGeo");

    const brands = (DATA.brands || []).filter(b=>allowedForGeo(b, geo));
    cardsEl.innerHTML = brands.map(casinoCard).join("");

    if(brands.length === 0){
      emptyGeo.textContent = geo;
      emptyEl.style.display = "block";
    }else{
      emptyEl.style.display = "none";
    }

    // attach chips fx to any element with js-chip
    document.querySelectorAll(".js-chip").forEach(el=>{
      el.addEventListener("click", (e)=>{
        // If it's a link, we still fire effect (doesn't block navigation)
        spawnChipRain(e.clientX || (window.innerWidth/2), e.clientY || 90);
      }, {passive:true});
    });
  }

  // ======= Chip rain effect =======
  function spawnChipRain(x, y){
    const count = 20;
    for(let i=0;i<count;i++){
      const chip = document.createElement("div");
      chip.className = "chip";

      const startX = x + (Math.random()*80 - 40);
      const startY = y + (Math.random()*40 - 20);

      chip.style.left = startX + "px";
      chip.style.top = startY + "px";

      // random color hints
      const hue = 210 + Math.floor(Math.random()*110);
      chip.style.borderColor = `hsla(${hue}, 90%, 70%, .65)`;

      document.body.appendChild(chip);

      const driftX = (Math.random()*260 - 130);
      const fall = 600 + Math.random()*500;
      const rot = (Math.random()*720 - 360);
      const dur = 900 + Math.random()*700;

      const start = performance.now();
      function step(t){
        const p = Math.min(1, (t - start)/dur);
        // ease-out
        const ease = 1 - Math.pow(1-p, 3);
        const tx = driftX * ease;
        const ty = fall * ease;
        const opacity = 1 - p;

        chip.style.transform = `translate(${tx}px, ${ty}px) rotate(${rot*ease}deg) translate(-50%,-50%)`;
        chip.style.opacity = opacity.toFixed(3);

        if(p < 1){
          requestAnimationFrame(step);
        }else{
          chip.remove();
        }
      }
      requestAnimationFrame(step);
    }
  }

  // Also: click anywhere in hero creates subtle effect
  document.addEventListener("click", (e)=>{
    // Avoid spam when clicking selects/buttons inside cookie banner
    const inCookie = e.target && (e.target.closest && e.target.closest("#cookieBanner"));
    if(inCookie) return;
    const inNav = e.target && (e.target.closest && e.target.closest("nav"));
    if(inNav) return;
    // small burst
    spawnChipRain(e.clientX, e.clientY);
  }, {passive:true});

  render();
</script>

</body>
</html>
